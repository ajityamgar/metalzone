{% extends 'base.html' %}
{% block title %}Blog - Metal Zone{% endblock %}
{% block meta_description %}Read the latest articles, guides, and stories about RC cars, metal collectibles, and Hot Wheels at Metal Zone.{% endblock %}
{% block meta_keywords %}RC car guides, Hot Wheels collecting, metal car reviews, collectibles blog, India{% endblock %}
{% block content %}
<section class="section" style="background: #f9f9f9; padding: 2rem 0;">
    <div class="container narrow center">
        <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">Our Blog</h1>
        <p>Latest stories, guides, and updates</p>
    </div>
</section>

<section class="section">
    <div class="container" style="max-width: 1000px;">
        <div class="grid cards-3">
            {% for post in pagination.items %}
                <article class="blog-card" style="background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                    <a href="{{ url_for('blog_detail', slug=post.slug) }}">
                        <img src="{{ post.hero_image|fix_image }}" alt="{{ post.title }}" style="width: 100%; height: 200px; object-fit: cover;" loading="lazy">
                    </a>
                    <div style="padding: 1.5rem;">
                        <p class="eyebrow" style="font-size: 0.7rem;">{{ post.created_at.strftime('%b %d, %Y') }}</p>
                        <h3 style="margin: 0.5rem 0 1rem; font-size: 1.2rem;"><a href="{{ url_for('blog_detail', slug=post.slug) }}">{{ post.title }}</a></h3>
                        <p style="color: #666; margin-bottom: 1rem; line-height: 1.6;">{{ post.headline }}</p>
                        <a class="link-arrow" href="{{ url_for('blog_detail', slug=post.slug) }}" style="color: #df2e7e; font-weight: 600;">Read Article <i class="fa-solid fa-arrow-right"></i></a>
                    </div>
                </article>
            {% else %}
                <p style="grid-column: 1/-1; text-align: center; color: #666; padding: 3rem;">No blog posts available at the moment.</p>
            {% endfor %}
        </div>
        
        {% if pagination.pages > 1 %}
            <div class="pagination">
                {% if pagination.has_prev %}
                    <a href="{{ url_for('blog_listing', page=pagination.prev_num) }}">« Previous</a>
                {% endif %}
                {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
                    {% if page_num %}
                        {% if page_num == pagination.page %}
                            <span class="current">{{ page_num }}</span>
                        {% else %}
                            <a href="{{ url_for('blog_listing', page=page_num) }}">{{ page_num }}</a>
                        {% endif %}
                    {% else %}
                        <span>…</span>
                    {% endif %}
                {% endfor %}
                {% if pagination.has_next %}
                    <a href="{{ url_for('blog_listing', page=pagination.next_num) }}">Next »</a>
                {% endif %}
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}
